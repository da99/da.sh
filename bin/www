#!/usr/bin/env bash

THIS_DIR="$(dirname "$0")/.."

case "$*" in
  --help|help|-h)
  cmd="$(basename "$0")"
  echo "$cmd upload public [dir] to [bucket]"
  echo "$cmd write file manifest for [dir]"
  echo "$cmd set src to [domain]"
  echo "$cmd prune uploaded files"
  echo "$cmd build mjs"
  echo "$cmd serve"
  echo "$cmd public_file setup|prune|update"
  ;;

  "upload public "*" to "*)
    "$THIS_DIR"/src/Bucket.rb upload "$3" to "$4"
  ;;

  "write file manifest for "*)
    "$THIS_DIR"/src/Bucket.rb "$@"
  ;;

  "set src to "*)
    "$THIS_DIR"/src/PublicFile.rb "$@"
    ;;

  'build mjs')
    "$THIS_DIR"/src/PublicFile.rb build mjs
  ;;

  'public_file '*)
    shift
    bun run "$THIS_DIR"/src/Public_File.mts "$@"
  ;;

  *)
  ;;
esac

